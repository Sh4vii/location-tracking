<%- include("partials/historyHeader"); -%>

<section id="container">
  <section class="historys">
          
          <% locationHistory.forEach((history)=>{    %>
 <% const timestamp = parseInt(history.date) %>
 
 <% const date = new Date(timestamp)%>

    <% const formattedDate = date.toLocaleDateString(); %>
    
  <% const minute = date.getMinutes() %>
  <% let hour = date.getHours() %>
 <% let ampm = hour >= 12 ? 'PM' : 'AM'; %>

<% hour = hour % 12; %>
<% hour = hour ? hour : 12; %>

    <% const formattedTime = `${hour}:${minute}${ampm}`; %>

   <form class="history-form" action="/locations" method="POST">
     <div class="history">
      <div class="timeStamp">
        <h4><input class="short" name="date" value="<%= formattedDate %>" readonly/></h4>
        <p class="small"><input class="short" name="time" value="<%= formattedTime %>" readonly/></p>
      </div>
      
      
      <div>
        <p class="small">Latitude: <input class="long" name="latitude" value="<%=history.latitude%>" readonly/></p>
        <p class="small">Longitude: <input class="long" name="longitude" value="<%=history.longitude%>"  readonly/></p>
      </div> 
      
      <button type="submit" onclick="viewLocation" class="colored small">View on map</button>
    </div>
   </form>
      <%   }) %>
    
   </section>
</section>

<section class="controls">
  <a href="/dashboard" class="control"><i class="fa-solid fa-earth-africa"></i></a>
  <a href="/history" class="control"><i class="fa-solid fa-map-location-dot colored"></i></a>
  <a href="/notification" class="control"><i class="fa-solid fa-bell"></i></a>
</section>
      
	<script src="js/history.js"></script>
  </body>
</html>